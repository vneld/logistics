<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <title>ì˜ì–´ ë¬¸ì œ í’€ì´</title>
    <style>
        body {
            font-family: 'Segoe UI', Arial, sans-serif;
            background: #f9f9f9;
            margin: 0;
            padding: 0;
        }
        .header {
            text-align: center;
            font-size: 2.5rem;
            font-weight: bold;
            margin-top: 40px;
            margin-bottom: 30px;
            letter-spacing: 2px;
        }
        .menu {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin-bottom: 40px;
        }
        .menu button {
            font-size: 1.1rem;
            padding: 12px 28px;
            border: none;
            border-radius: 8px;
            background: #4a90e2;
            color: white;
            cursor: pointer;
            transition: background 0.2s;
        }
        .menu button:hover {
            background: #357abd;
        }
        .scoreboard-area {
            position: absolute;
            top: 20px;
            right: 40px;
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 20;
        }
        .scoreboard {
            font-size: 1.1rem;
            background: #fff;
            padding: 8px 18px;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .reset-btn {
            font-size: 0.9rem;
            padding: 6px 14px;
            border: none;
            border-radius: 6px;
            background: #e2e2e2;
            color: #333;
            cursor: pointer;
            margin-left: 6px;
        }
        .reset-btn:hover {
            background: #f2b84b;
            color: #222;
        }
        .prev-btn {
            position: fixed;
            top: 50%;
            right: 40px;
            transform: translateY(-50%);
            padding: 12px 28px;
            border: none;
            border-radius: 8px;
            background: #f2b84b;
            color: #222;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            z-index: 100;
            box-shadow: 0 2px 8px rgba(0,0,0,0.08);
        }
        .prev-btn.hidden {
            display: none;
        }
        .content {
            max-width: 700px;
            margin: 0 auto;
            background: #fff;
            border-radius: 10px;
            box-shadow: 0 2px 12px rgba(0,0,0,0.07);
            padding: 40px 30px;
            min-height: 220px;
            position: relative;
        }
        .question {
            font-size: 1.2rem;
            margin-bottom: 20px;
            color: #222;
        }
        .eng-highlight {
            font-weight: bold;
            color: #2b4a7a;
            background: #e2f2ff;
            border-radius: 5px;
            padding: 2px 6px;
            display: inline-block;
        }
        .input-area {
            display: flex;
            gap: 10px;
            margin-bottom: 16px;
        }
        .input-area input {
            flex: 1;
            font-size: 1rem;
            padding: 8px;
            border-radius: 6px;
            border: 1px solid #bbb;
        }
        .input-area button {
            font-size: 1rem;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            background: #4a90e2;
            color: white;
            cursor: pointer;
        }
        .result {
            font-size: 1.1rem;
            font-weight: bold;
            margin-bottom: 12px;
        }
        .next-btn {
            margin-top: 8px;
            font-size: 1rem;
            padding: 8px 18px;
            border: none;
            border-radius: 6px;
            background: #6fdc6f;
            color: #222;
            cursor: pointer;
        }
        .hidden {
            display: none;
        }
        /* ë¹ˆì¹¸ìƒì ìŠ¤íƒ€ì¼ */
        .box-words-area {
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
            margin-bottom: 20px;
        }
        .draggable-word {
            display: inline-block;
            padding: 8px 14px;
            background: #e0e7ef;
            border-radius: 8px;
            margin: 4px 2px;
            cursor: grab;
            border: 1.5px solid #4a90e2;
            font-size: 1rem;
            user-select: none;
        }
        .draggable-word.hidden {
            display: none !important;
        }
        .dropzone {
            min-width: 120px;
            min-height: 34px;
            border: 2px dashed #bbb;
            border-radius: 8px;
            display: inline-block;
            vertical-align: middle;
            margin: 0 8px;
            background: #f7f7f7;
            text-align: center;
            line-height: 34px;
        }
        .dropzone.filled {
            border: 2px solid #4a90e2;
            background: #d7f2ff;
        }
        .blank-question {
            margin-bottom: 12px;
            font-size: 1.1rem;
        }
        .blank-kor {
            margin-bottom: 4px;
            color: #444;
        }
        .blank-eng {
            font-weight: bold;
            color: #2b4a7a;
            background: #e2f2ff;
            border-radius: 5px;
            padding: 2px 6px;
            display: inline-block;
        }
        .blankbox-row {
            margin-bottom: 16px;
            font-size: 1.1rem;
        }
        .blankbox-label {
            display: inline-block;
            min-width: 26px;
            font-weight: bold;
        }
        .blankbox-result {
            display: inline-block;
            min-width: 48px;
            font-weight: bold;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="scoreboard-area">
        <div class="scoreboard">
            ë§íŒ ê°œìˆ˜: <span id="score-correct">0</span> / ì˜¤ë‹µ: <span id="score-wrong">0</span>
        </div>
        <button class="reset-btn" id="reset-btn" onclick="resetScore()">ì´ˆê¸°í™”</button>
    </div>
    <button class="prev-btn hidden" id="prev-btn" onclick="goPrev()">ì´ì „</button>
    <div class="header">ì˜ì–´ ë¬¸ì œ í’€ì´</div>
    <div class="menu">
        <button id="btn-translate">í•´ì„</button>
        <button id="btn-verb">ë™ì‚¬ë³€í˜•</button>
        <button id="btn-blank">ë¹ˆì¹¸</button>
        <button id="btn-blankbox">ë¹ˆì¹¸ìƒì</button>
        <button id="btn-sentence">ë¬¸ì¥</button>
    </div>
    <div class="content" id="main-content">
        <div style="text-align:center; color:#888; font-size:1.1rem;">
            ë²„íŠ¼ì„ ëˆŒëŸ¬ ë¬¸ì œë¥¼ ì‹œì‘í•˜ì„¸ìš”!
        </div>
    </div>

    <script>
        // ---- ë°ì´í„° ----
        // 1. í•´ì„: í‚¤ì›Œë“œ í¬í•¨ ì •ë‹µ ì²˜ë¦¬
        const translationQuestions = [
            {
                eng: "You werenâ€™t there when they first made paper or built the amphitheatre, when they calculated gravity or made flying reality.",
                kor: "ê·¸ë“¤ì´ ì²˜ìŒ ì¢…ì´ë¥¼ ë§Œë“¤ê±°ë‚˜ ì›í˜•ê·¹ì¥ì„ ì§€ì„ ë•Œ, ê·¸ë“¤ì´ ì¤‘ë ¥ì„ ê³„ì‚°í•˜ê±°ë‚˜ ë¹„í–‰ í˜„ì‹¤ì„ ë§Œë“¤ì—ˆì„ ë•Œ ë‹¹ì‹ ì€ ê·¸ê³³ì— ì—†ì—ˆìŠµë‹ˆë‹¤.",
                keywords: ["ê·¸ë“¤ì´", "ì²˜ìŒ", "ì¢…ì´", "ë§Œë“¤ê±°ë‚˜", "ì›í˜•ê·¹ì¥", "ì§€", "ì¤‘ë ¥ì„ ê³„ì‚°", "ë¹„í–‰ í˜„ì‹¤ì„ ë§Œ", "ë‹¹ì‹ ì€ ê·¸ê³³ì— ì—†ì—ˆìŠµë‹ˆë‹¤"]
            },
            {
                eng: "It says you are trained in technology. That's very good. Are you adept at Excel?",
                kor: "ê¸°ìˆ  êµìœ¡ì„ ë°›ì•˜ë‹¤ê³  ì“°ì—¬ ìˆë„¤ìš”. ì•„ì£¼ ì˜ëë„¤ìš”. í˜¹ì‹œ ì—‘ì…€ì€ ëŠ¥ìˆ™í•˜ì‹ ê°€ìš”?",
                keywords: ["ê¸°ìˆ  êµìœ¡", "ë°›", "ì“°ì—¬", "ì•„ì£¼", "í˜¹ì‹œ", "ì—‘ì…€", "ëŠ¥ìˆ™"]
            },
            {
                eng: "We see this famous brand everywhere but never consider what their logos mean exactly. But every line, curve and color has meaning behind it.",
                kor: "ìš°ë¦¬ëŠ” ì´ ìœ ëª…í•œ ë¸Œëœë“œë¥¼ ì–´ë””ì—ì„œë‚˜ ë³¼ ìˆ˜ ìˆì§€ë§Œ ê·¸ ë¡œê³ ê°€ ì •í™•íˆ ë¬´ì—‡ì„ ì˜ë¯¸í•˜ëŠ”ì§€ëŠ” ê²°ì½” ê³ ë ¤í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. í•˜ì§€ë§Œ ëª¨ë“  ì„ , ê³¡ì„ , ê·¸ë¦¬ê³  ìƒ‰ìƒ ë’¤ì—ëŠ” ì˜ë¯¸ê°€ ìˆìŠµë‹ˆë‹¤.",
                keywords: ["ìš°ë¦¬", "ì´", "ìœ ëª…í•œ ë¸Œëœë“œ", "ì–´ë””ì—ì„œë‚˜", "ë³¼", "ë¡œê³ ê°€", "ì •í™•íˆ ë¬´ì—‡ì„ ì˜ë¯¸í•˜ëŠ”", "ê²°ì½”", "ê³ ë ¤í•˜ì§€ ì•Š", "í•˜ì§€ë§Œ", "ëª¨ë“ ", "ì„ ", "ê³¡ì„ ", "ê·¸ë¦¬ê³ ", "ìƒ‰ìƒ", "ë’¤ì—ëŠ”", "ì˜ë¯¸", "ìˆ"]
            },
            {
                eng: 'If "manners maketh man" as someone said, then he\'s the hero of the day.',
                kor: 'ëˆ„êµ°ê°€ê°€ ë§í•œ ê²ƒì²˜ëŸ¼ "ë§¤ë„ˆê°€ ì¸ê°„ì„ ë§Œë“ ë‹¤"ë©´, ê·¸ëŠ” ì˜¤ëŠ˜ì˜ ì˜ì›…ì…ë‹ˆë‹¤.',
                keywords: ["ëˆ„êµ°ê°€", "ë§", "ë§¤ë„ˆê°€ ì¸ê°„ì„ ë§Œë“ ë‹¤", "ê·¸", "ì˜¤ëŠ˜ì˜", "ì˜ì›…"]
            },
            {
                eng: "One person that's been influential on my life would, I would say, my father.",
                kor: "ì œ ì‚¶ì— ì˜í–¥ì„ ì¤€ í•œ ì‚¬ëŒì€, ì œ ì•„ë²„ì§€ë¼ê³  í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.",
                keywords: ["ì œ", "ì‚¶", "ì˜í–¥", "ì¤€", "í•œ", "ì‚¬ëŒ", "ì œ", "ì•„ë²„ì§€"]
            }
        ];

        // 2. ë™ì‚¬ë³€í˜•
        const verbQuestions = [
            { q: "The movie ____ ____ (make) in 1965", a: "was made" },
            { q: "My phone _____  ________ (steal)  a few days ago", a: "was stolen" },
            { q: "A : How ______ (be) the party last night?", a: "was" },
            { q: "It _____ (be) great.", a: "was" },
            { q: "I _______ (have) a terrible headache yesterday.", a: "had" },
            { q: "Last year She _____(be) 22", a: "was" },
            { q: "so she _______(be) 23 now.", a: "is" },
            { q: "Sarah ____  ______ (live) in Paris since 1995.", a: "has lived" },
            { q: "She _____ ___ (not, be) to Spain yet.", a: "hasn't been" }
        ];

        // 3. ë¹ˆì¹¸
        const blankQuestions = [
            {
                kor: "ë‚˜ëŠ” ì˜ˆì „ì— ë‹´ë°°ë¥¼ íˆì–´.",
                eng: "I ______ ___ smoke.",
                a: "used to"
            },
            {
                kor: "ë¦°ê³¼ ë§ˆí¬ëŠ” 20ë…„ ì „ì— ê²°í˜¼í–ˆì–´.",
                eng: "Lynn and Mark got married _____ ____ ___.",
                a: "twenty years ago"
            },
            {
                kor: "ë„ˆëŠ” ê¸°ìˆ ì— ëŠ¥ìˆ™í•´ì•¼ë§Œ í•´.",
                eng: "You've got to ____ really ____  ___ technology.",
                a: "be good at"
            },
            {
                kor: "ë‚œ ì´ë¯¸ ì—¬í–‰ê°ˆ ì§ì„ ë‹¤ ì‹¸ë†¨ì–´.",
                eng: "I have _____ done packing for the trip.",
                a: "already"
            },
            {
                kor: "ìš°ë¦¬ëŠ” ì˜ ë§ì§€ ì•Šì„ ê±° ê°™ì•„.",
                eng: "I donâ€™t think we are going to be a _____ ____ .",
                a: "good fit"
            }
        ];

        // 4. ë¹ˆì¹¸ìƒì
        const blankboxWords = [
            "X-ray machine", "ride-hailing", "adidas", "byte", "bite",
            "generation", "digital signal", "flavors", "representative", "client", "Siri"
        ];
        const blankboxQuestions = [
            {
                q: "____ is a virtual assistant that is part of Apple Inc.'s iOS",
                a: "Siri"
            },
            {
                q: "A ________ is all of the people born and living at about the same time",
                a: "generation"
            },
            {
                q: "The logo of _____ has changed over time but it has always included three stripes.",
                a: "adidas"
            },
            {
                q: "He realized that ______ sounded exactly the same as the computer terms, ________",
                a: ["bite", "byte"]
            },
            {
                q: "The last two are similar to the number 1 & 0 that is symbols of ______ ________.",
                a: "digital signal"
            },
            {
                q: "__________ is when a person uses an app to â€œhailâ€ or request a local driver to pick them up and take them directly to their destination.",
                a: "ride-hailing"
            }
        ];

        // 5. ë¬¸ì¥
        const sentenceQuestions = [
            { q: "How do you get to school?", a: "I walk to school for 4 hours" },
            { q: "How long does it take to get to school?", a: "It takes about 1 hours by car" },
            { q: "Whatâ€™s your major?", a: "My major is Logistics" },
            { q: "What do you want to be someday?", a: "I hope one day to be an expert" },
            { q: "What did you do last weekend?", a: "I stayed at home and played computer games" },
            { q: "What are you like?", a: "I`m logical and creative" },
            { q: "Where were you born?", a: "I was born is Busan" },
            { q: "What kind of car would you like to buy in the future? What is the reason?", a: "I would like to buy an BMW because it is cool" },
            { q: "Whatâ€™ your strength?", a: "I`m good at creativity" },
            { q: "What have you achieved this year?", a: "I`ve a lot of friends in college" }
        ];

        // ---- ìƒíƒœ ----
        let correct = 0;
        let wrong = 0;
        let currentIdx = 0;
        let currentPage = "main";
        let prevStack = [];

        // ---- ê³µí†µ í•¨ìˆ˜ ----
        function updateScore() {
            document.getElementById('score-correct').textContent = correct;
            document.getElementById('score-wrong').textContent = wrong;
        }
        function resetScore() {
            correct = 0;
            wrong = 0;
            updateScore();
        }
        function showPrevBtn(show = true) {
            document.getElementById('prev-btn').classList.toggle('hidden', !show);
        }
        function goPrev() {
            if (prevStack.length > 0) {
                const prev = prevStack.pop();
                switch (prev.page) {
                    case "main": showMain(); break;
                    case "translate": showTranslationQuiz(prev.idx); break;
                    case "verb": showVerbQuiz(prev.idx); break;
                    case "blank": showBlankQuiz(prev.idx); break;
                    case "blankbox": showBlankboxQuiz(); break;
                    case "sentence": showSentenceQuiz(prev.idx); break;
                }
            }
        }
        function pushPrev(page, idx = 0) {
            prevStack.push({ page, idx });
        }
        function showMain() {
            currentPage = "main";
            showPrevBtn(false);
            document.getElementById('main-content').innerHTML = `
                <div style="text-align:center; color:#888; font-size:1.1rem;">
                    ë²„íŠ¼ì„ ëˆŒëŸ¬ ë¬¸ì œë¥¼ ì‹œì‘í•˜ì„¸ìš”!
                </div>
            `;
        }
        // ---- í•´ì„ ----
        document.getElementById('btn-translate').addEventListener('click', () => showTranslationQuiz(0));
        function showTranslationQuiz(idx = 0) {
            currentPage = "translate";
            pushPrev("main");
            showPrevBtn(true);
            correct = 0; wrong = 0; currentIdx = idx;
            updateScore();
            renderTranslationQuestion();
        }
        function renderTranslationQuestion() {
            const q = translationQuestions[currentIdx];
            let html = `
                <div class="question"><b>ì˜ì–´ ë¬¸ì¥:</b><br><span class="eng-highlight">${q.eng}</span></div>
                <div class="input-area">
                    <input type="text" id="answer-input" placeholder="í•´ì„ì„ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off">
                    <button id="answer-btn">ì œì¶œ</button>
                </div>
                <div class="result" id="result-msg"></div>
                <button class="next-btn hidden" id="next-btn">ë‹¤ìŒ ë¬¸ì œ</button>
            `;
            document.getElementById('main-content').innerHTML = html;
            document.getElementById('answer-input').focus();
            // í‚¤ë³´ë“œ ì´ë²¤íŠ¸
            document.getElementById('answer-input').onkeydown = function(e) {
                if (["Enter"].includes(e.key)) {
                    e.preventDefault();
                    if (!document.getElementById('answer-input').disabled) checkAnswer();
                    else if (!document.getElementById('next-btn').classList.contains('hidden')) nextQuestion();
                }
            };
            document.getElementById('answer-btn').onclick = checkAnswer;
            document.getElementById('next-btn').onclick = nextQuestion;
        }
        function checkAnswer() {
            const userInput = document.getElementById('answer-input').value.trim();
            const q = translationQuestions[currentIdx];
            const resultMsg = document.getElementById('result-msg');
            const nextBtn = document.getElementById('next-btn');
            const keywords = q.keywords;

            // ê³µë°±, ì‰¼í‘œ, ë§ˆì¹¨í‘œ ëª¨ë‘ ì œê±°
            function normalize(str) {
                return str.replace(/[ ,.]/g, "");
            }

            // ë‹µë³€ì— í‚¤ì›Œë“œê°€ ëª¨ë‘ í¬í•¨ë˜ì–´ ìˆìœ¼ë©´ ì •ë‹µ
            let allIncluded = keywords.every(k =>
                normalize(userInput).includes(normalize(k))
            );

            if (allIncluded) {
                resultMsg.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‘";
                resultMsg.style.color = "#2b9e2b";
                correct++;
            } else {
                resultMsg.textContent = "ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µ: " + q.kor;
                resultMsg.style.color = "#e23c3c";
                wrong++;
            }
            updateScore();
            nextBtn.classList.remove('hidden');
            document.getElementById('answer-input').disabled = true;
        }
        function nextQuestion() {
            currentIdx++;
            if (currentIdx < translationQuestions.length) {
                renderTranslationQuestion();
            } else {
                document.getElementById('main-content').innerHTML = `
                    <div style="text-align:center; font-size:1.3rem; margin-bottom:16px;">
                        í•´ì„ ë¬¸ì œ í’€ì´ ì™„ë£Œ!
                    </div>
                    <div style="text-align:center; font-size:1.1rem; margin-bottom:12px;">
                        ë§íŒ ê°œìˆ˜: <b>${correct}</b> / ì˜¤ë‹µ: <b>${wrong}</b>
                    </div>
                    <div style="text-align:center;">
                        <button class="next-btn" onclick="showTranslationQuiz(0)">ë‹¤ì‹œ í’€ê¸°</button>
                        <button class="next-btn" onclick="showMain()">ì²˜ìŒìœ¼ë¡œ</button>
                    </div>
                `;
            }
        }

        // ---- ë™ì‚¬ë³€í˜• ----
        document.getElementById('btn-verb').addEventListener('click', () => showVerbQuiz(0));
        function showVerbQuiz(idx = 0) {
            currentPage = "verb";
            pushPrev("main");
            showPrevBtn(true);
            correct = 0; wrong = 0; currentIdx = idx;
            updateScore();
            renderVerbQuestion();
        }
        function renderVerbQuestion() {
            const q = verbQuestions[currentIdx];
            let html = `
                <div class="question"><b>ë¬¸ì¥:</b><br><span class="eng-highlight">${q.q}</span></div>
                <div class="input-area">
                    <input type="text" id="verb-input" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off">
                    <button id="verb-btn">ì œì¶œ</button>
                </div>
                <div class="result" id="verb-result"></div>
                <button class="next-btn hidden" id="verb-next-btn">ë‹¤ìŒ ë¬¸ì œ</button>
            `;
            document.getElementById('main-content').innerHTML = html;
            document.getElementById('verb-input').focus();
            document.getElementById('verb-input').onkeydown = function(e) {
                if (["Enter"].includes(e.key)) {
                    e.preventDefault();
                    if (!document.getElementById('verb-input').disabled) checkVerbAnswer();
                    else if (!document.getElementById('verb-next-btn').classList.contains('hidden')) nextVerb();
                }
            };
            document.getElementById('verb-btn').onclick = checkVerbAnswer;
            document.getElementById('verb-next-btn').onclick = nextVerb;
        }
        function checkVerbAnswer() {
            const userInput = document.getElementById('verb-input').value.trim().replace(/\s+/g, " ");
            const answer = verbQuestions[currentIdx].a.trim().replace(/\s+/g, " ");
            const resultMsg = document.getElementById('verb-result');
            const nextBtn = document.getElementById('verb-next-btn');
            if (userInput.toLowerCase() === answer.toLowerCase()) {
                resultMsg.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‘";
                resultMsg.style.color = "#2b9e2b";
                correct++;
            } else {
                resultMsg.textContent = "ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µ: " + answer;
                resultMsg.style.color = "#e23c3c";
                wrong++;
            }
            updateScore();
            nextBtn.classList.remove('hidden');
            document.getElementById('verb-input').disabled = true;
        }
        function nextVerb() {
            currentIdx++;
            if (currentIdx < verbQuestions.length) {
                renderVerbQuestion();
            } else {
                document.getElementById('main-content').innerHTML = `
                    <div style="text-align:center; font-size:1.3rem; margin-bottom:16px;">
                        ë™ì‚¬ë³€í˜• ë¬¸ì œ í’€ì´ ì™„ë£Œ!
                    </div>
                    <div style="text-align:center; font-size:1.1rem; margin-bottom:12px;">
                        ë§íŒ ê°œìˆ˜: <b>${correct}</b> / ì˜¤ë‹µ: <b>${wrong}</b>
                    </div>
                    <div style="text-align:center;">
                        <button class="next-btn" onclick="showVerbQuiz(0)">ë‹¤ì‹œ í’€ê¸°</button>
                        <button class="next-btn" onclick="showMain()">ì²˜ìŒìœ¼ë¡œ</button>
                    </div>
                `;
            }
        }

        // ---- ë¹ˆì¹¸ ----
        document.getElementById('btn-blank').addEventListener('click', () => showBlankQuiz(0));
        function showBlankQuiz(idx = 0) {
            currentPage = "blank";
            pushPrev("main");
            showPrevBtn(true);
            correct = 0; wrong = 0; currentIdx = idx;
            updateScore();
            renderBlankQuestion();
        }
        function renderBlankQuestion() {
            const q = blankQuestions[currentIdx];
            let html = `
                <div class="blank-question">
                    <div class="blank-kor">${q.kor}</div>
                    <div class="blank-eng">${q.eng}</div>
                </div>
                <div class="input-area">
                    <input type="text" id="blank-input" placeholder="ì •ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off">
                    <button id="blank-btn">ì œì¶œ</button>
                </div>
                <div class="result" id="blank-result"></div>
                <button class="next-btn hidden" id="blank-next-btn">ë‹¤ìŒ ë¬¸ì œ</button>
            `;
            document.getElementById('main-content').innerHTML = html;
            document.getElementById('blank-input').focus();
            document.getElementById('blank-input').onkeydown = function(e) {
                if (["Enter"].includes(e.key)) {
                    e.preventDefault();
                    if (!document.getElementById('blank-input').disabled) checkBlankAnswer();
                    else if (!document.getElementById('blank-next-btn').classList.contains('hidden')) nextBlank();
                }
            };
            document.getElementById('blank-btn').onclick = checkBlankAnswer;
            document.getElementById('blank-next-btn').onclick = nextBlank;
        }
        function checkBlankAnswer() {
            const userInput = document.getElementById('blank-input').value.trim().replace(/\s+/g, " ");
            const answer = blankQuestions[currentIdx].a.trim().replace(/\s+/g, " ");
            const resultMsg = document.getElementById('blank-result');
            const nextBtn = document.getElementById('blank-next-btn');
            if (userInput.toLowerCase() === answer.toLowerCase()) {
                resultMsg.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‘";
                resultMsg.style.color = "#2b9e2b";
                correct++;
            } else {
                resultMsg.textContent = "ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µ: " + answer;
                resultMsg.style.color = "#e23c3c";
                wrong++;
            }
            updateScore();
            nextBtn.classList.remove('hidden');
            document.getElementById('blank-input').disabled = true;
        }
        function nextBlank() {
            currentIdx++;
            if (currentIdx < blankQuestions.length) {
                renderBlankQuestion();
            } else {
                document.getElementById('main-content').innerHTML = `
                    <div style="text-align:center; font-size:1.3rem; margin-bottom:16px;">
                        ë¹ˆì¹¸ ë¬¸ì œ í’€ì´ ì™„ë£Œ!
                    </div>
                    <div style="text-align:center; font-size:1.1rem; margin-bottom:12px;">
                        ë§íŒ ê°œìˆ˜: <b>${correct}</b> / ì˜¤ë‹µ: <b>${wrong}</b>
                    </div>
                    <div style="text-align:center;">
                        <button class="next-btn" onclick="showBlankQuiz(0)">ë‹¤ì‹œ í’€ê¸°</button>
                        <button class="next-btn" onclick="showMain()">ì²˜ìŒìœ¼ë¡œ</button>
                    </div>
                `;
            }
        }

        // ---- ë¹ˆì¹¸ìƒì ----
        document.getElementById('btn-blankbox').addEventListener('click', showBlankboxQuiz);
        function showBlankboxQuiz() {
            currentPage = "blankbox";
            pushPrev("main");
            showPrevBtn(true);
            correct = 0; wrong = 0;
            updateScore();
            let html = `<div class="box-words-area" id="box-words-area">`;
            blankboxWords.forEach((w, i) => {
                html += `<div class="draggable-word" draggable="true" id="word-${i}" data-word="${w}">${w}</div>`;
            });
            html += `</div><div style="margin-bottom:14px; color:#888;">ë‹¨ì–´ ìƒìë¥¼ ë“œë˜ê·¸í•´ì„œ ë¹ˆì¹¸ì— ì˜¬ë ¤ë†“ìœ¼ì„¸ìš”.</div>`;
            blankboxQuestions.forEach((q, i) => {
                html += `<div class="blankbox-row" id="blankbox-row-${i}">
                    <span class="blankbox-label">${i+1}.</span>
                    ${renderBlankboxQuestion(q, i)}
                    <span class="blankbox-result" id="blankbox-result-${i}"></span>
                </div>`;
            });
            html += `<button class="next-btn" onclick="checkBlankboxAnswer()">ì •ë‹µ í™•ì¸</button>
                    <button class="next-btn" onclick="showMain()">ì²˜ìŒìœ¼ë¡œ</button>`;
            document.getElementById('main-content').innerHTML = html;
            makeBlankboxDraggable();
        }
        function renderBlankboxQuestion(q, idx) {
            if (Array.isArray(q.a)) {
                return q.q.replace("______", `<span class="dropzone" data-row="${idx}" data-pos="0"></span>`)
                         .replace("______", `<span class="dropzone" data-row="${idx}" data-pos="1"></span>`);
            } else if (q.q.includes("____") && !Array.isArray(q.a)) {
                return q.q.replace(/____+/, `<span class="dropzone" data-row="${idx}" data-pos="0"></span>`);
            } else {
                return q.q;
            }
        }
        function makeBlankboxDraggable() {
            document.querySelectorAll('.draggable-word').forEach(el => {
                el.addEventListener('dragstart', e => {
                    e.dataTransfer.setData('text/plain', el.dataset.word);
                    setTimeout(() => el.classList.add('hidden'), 0);
                });
                el.addEventListener('dragend', e => {
                    if (!el.classList.contains('used')) el.classList.remove('hidden');
                });
            });
            document.querySelectorAll('.dropzone').forEach(zone => {
                zone.addEventListener('dragover', e => e.preventDefault());
                zone.addEventListener('drop', e => {
                    e.preventDefault();
                    const word = e.dataTransfer.getData('text/plain');
                    if ([...document.querySelectorAll('.dropzone')].some(z => z.textContent === word)) return;
                    zone.textContent = word;
                    zone.classList.add('filled');
                    document.querySelectorAll('.draggable-word').forEach(el => {
                        if (el.dataset.word === word) {
                            el.classList.add('used');
                            el.classList.add('hidden');
                        }
                    });
                });
                zone.addEventListener('click', e => {
                    const word = zone.textContent;
                    if (word) {
                        document.querySelectorAll('.draggable-word').forEach(el => {
                            if (el.dataset.word === word) {
                                el.classList.remove('used');
                                el.classList.remove('hidden');
                            }
                        });
                    }
                    zone.textContent = "";
                    zone.classList.remove('filled');
                });
            });
        }
        function checkBlankboxAnswer() {
            let allCorrect = 0;
            let allWrong = 0;
            blankboxQuestions.forEach((q, idx) => {
                let ok = false;
                if (Array.isArray(q.a)) {
                    const z0 = document.querySelector(`.dropzone[data-row="${idx}"][data-pos="0"]`);
                    const z1 = document.querySelector(`.dropzone[data-row="${idx}"][data-pos="1"]`);
                    if (z0 && z1 && z0.textContent && z1.textContent) {
                        ok = (z0.textContent.trim().toLowerCase() === q.a[0].toLowerCase() &&
                              z1.textContent.trim().toLowerCase() === q.a[1].toLowerCase());
                    }
                } else {
                    const z0 = document.querySelector(`.dropzone[data-row="${idx}"][data-pos="0"]`);
                    if (z0 && z0.textContent) {
                        ok = (z0.textContent.trim().toLowerCase() === q.a.toLowerCase());
                    }
                }
                const res = document.getElementById(`blankbox-result-${idx}`);
                if (ok) {
                    res.textContent = "ì •ë‹µ";
                    res.style.color = "#2b9e2b";
                    allCorrect++;
                } else {
                    res.textContent = "ì˜¤ë‹µ";
                    res.style.color = "#e23c3c";
                    allWrong++;
                }
            });
            correct = allCorrect;
            wrong = allWrong;
            updateScore();
        }

        // ---- ë¬¸ì¥ ----
        document.getElementById('btn-sentence').addEventListener('click', () => showSentenceQuiz(0));
        function showSentenceQuiz(idx = 0) {
            currentPage = "sentence";
            pushPrev("main");
            showPrevBtn(true);
            correct = 0; wrong = 0; currentIdx = idx;
            updateScore();
            renderSentenceQuestion();
        }
        function renderSentenceQuestion() {
            const q = sentenceQuestions[currentIdx];
            let html = `
                <div class="question"><b>ì§ˆë¬¸:</b><br><span class="eng-highlight">${q.q}</span></div>
                <div class="input-area">
                    <input type="text" id="sentence-input" placeholder="ë‹µì„ ì…ë ¥í•˜ì„¸ìš”" autocomplete="off">
                    <button id="sentence-btn">ì œì¶œ</button>
                </div>
                <div class="result" id="sentence-result"></div>
                <button class="next-btn hidden" id="sentence-next-btn">ë‹¤ìŒ ë¬¸ì œ</button>
            `;
            document.getElementById('main-content').innerHTML = html;
            document.getElementById('sentence-input').focus();
            document.getElementById('sentence-input').onkeydown = function(e) {
                if (["Enter"].includes(e.key)) {
                    e.preventDefault();
                    if (!document.getElementById('sentence-input').disabled) checkSentenceAnswer();
                    else if (!document.getElementById('sentence-next-btn').classList.contains('hidden')) nextSentence();
                }
            };
            document.getElementById('sentence-btn').onclick = checkSentenceAnswer;
            document.getElementById('sentence-next-btn').onclick = nextSentence;
        }
        function checkSentenceAnswer() {
            const userInput = document.getElementById('sentence-input').value.trim().replace(/\s+/g, " ");
            const answer = sentenceQuestions[currentIdx].a.trim().replace(/\s+/g, " ");
            const resultMsg = document.getElementById('sentence-result');
            const nextBtn = document.getElementById('sentence-next-btn');
            if (userInput.toLowerCase() === answer.toLowerCase()) {
                resultMsg.textContent = "ì •ë‹µì…ë‹ˆë‹¤! ğŸ‘";
                resultMsg.style.color = "#2b9e2b";
                correct++;
            } else {
                resultMsg.textContent = "ì˜¤ë‹µì…ë‹ˆë‹¤. ì •ë‹µ: " + answer;
                resultMsg.style.color = "#e23c3c";
                wrong++;
            }
            updateScore();
            nextBtn.classList.remove('hidden');
            document.getElementById('sentence-input').disabled = true;
        }
        function nextSentence() {
            currentIdx++;
            if (currentIdx < sentenceQuestions.length) {
                renderSentenceQuestion();
            } else {
                document.getElementById('main-content').innerHTML = `
                    <div style="text-align:center; font-size:1.3rem; margin-bottom:16px;">
                        ë¬¸ì¥ ë¬¸ì œ í’€ì´ ì™„ë£Œ!
                    </div>
                    <div style="text-align:center; font-size:1.1rem; margin-bottom:12px;">
                        ë§íŒ ê°œìˆ˜: <b>${correct}</b> / ì˜¤ë‹µ: <b>${wrong}</b>
                    </div>
                    <div style="text-align:center;">
                        <button class="next-btn" onclick="showSentenceQuiz(0)">ë‹¤ì‹œ í’€ê¸°</button>
                        <button class="next-btn" onclick="showMain()">ì²˜ìŒìœ¼ë¡œ</button>
                    </div>
                `;
            }
        }
        // ---- ì²˜ìŒ ì‹œì‘ ----
        showPrevBtn(false);
    </script>
</body>
</html>
